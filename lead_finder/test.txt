(venv) xskills@Merdans-MacBook-Pro-104 SalesShortcut %                make deploy_local
ðŸ§¹ Stopping all services...
INFO:     Shutting down
2025-06-10 20:11:32,845 - UIClient - INFO - WebSocket disconnected. Total connections: 0
INFO:     connection closed
INFO:     Shutting down
âœ… All services stopped
Checking environment variables...
INFO:     Shutting down
INFO:     Shutting down
INFO:     Shutting down
âœ… GOOGLE_API_KEY is set
INFO:     Shutting down
âœ… OPENAI_API_KEY is set
âœ… ANTHROPIC_API_KEY is set
ðŸš€ Deploying all services locally...
INFO:     Waiting for application shutdown.
2025-06-10 20:11:32,944 - UIClient - INFO - UI Client shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [30062]
Starting local services...
Using GOOGLE_API_KEY for Gemini LLM inference...
Starting Calendar Assistant service in the background...
Calendar Assistant started with PID: 31820
Starting Lead Finder service in the background...
Lead Finder started with PID: 31821
Starting Lead Manager service in the background...
Lead Manager started with PID: 31822
Starting Outreach service in the background...
Outreach started with PID: 31823
Starting SDR service in the background...
SDR started with PID: 31824
Starting UI Client service in the background...
UI Client started with PID: 31825
--------------------------------------------------
Local services started:
  Calendar Assistant: http://127.0.0.1:8080 (PID: 31820)
  Lead Finder:        http://127.0.0.1:8081 (PID: 31821)
  Lead Manager:       http://127.0.0.1:8082 (PID: 31822)
  Outreach:           http://127.0.0.1:8083 (PID: 31823)
  SDR:                http://127.0.0.1:8084 (PID: 31824)
  UI Client:          http://127.0.0.1:8000 (PID: 31825)
--------------------------------------------------
Use 'kill 31820 31821 31822 31823 31824 31825' or Ctrl+C to stop all services.
INFO:     Waiting for application shutdown.                                                                                                                  
INFO:     Application shutdown complete.
INFO:     Finished server process [30059]
(venv) xskills@Merdans-MacBook-Pro-104 SalesShortcut % INFO:     Waiting for application shutdown.
INFO:     Waiting for application shutdown.
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30060]
INFO:     Application shutdown complete.
INFO:     Finished server process [30061]
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30057]
INFO:     Application shutdown complete.
INFO:     Finished server process [30058]
Starting SDR placeholder service on port 8084...
Starting Outreach placeholder service on port 8083...
Starting Calendar Assistant placeholder service on port 8080...
INFO:     Started server process [31824]
INFO:     Started server process [31820]
INFO:     Started server process [31823]
INFO:     Waiting for application startup.
INFO:     Waiting for application startup.
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Application startup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8083 (Press CTRL+C to quit)
INFO:     Uvicorn running on http://0.0.0.0:8084 (Press CTRL+C to quit)
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
2025-06-10 20:11:33,454 - UIClient - INFO - ============================================================
2025-06-10 20:11:33,454 - UIClient - INFO - SalesShortcut UI Client - Lead Generation Dashboard
2025-06-10 20:11:33,454 - UIClient - INFO - ============================================================
2025-06-10 20:11:33,454 - UIClient - INFO - Starting UI Client on 0.0.0.0:8000
2025-06-10 20:11:33,454 - UIClient - INFO - Log level: INFO
2025-06-10 20:11:33,454 - UIClient - INFO - Reload mode: False
2025-06-10 20:11:33,454 - UIClient - INFO - Workers: 1
2025-06-10 20:11:33,454 - UIClient - INFO - 
2025-06-10 20:11:33,454 - UIClient - INFO - Required Services (ensure they are running):
2025-06-10 20:11:33,454 - UIClient - INFO -   Lead Finder:        http://127.0.0.1:8081
2025-06-10 20:11:33,454 - UIClient - INFO -   SDR Agent:          http://127.0.0.1:8084
2025-06-10 20:11:33,454 - UIClient - INFO -   Lead Manager:       http://127.0.0.1:8082
2025-06-10 20:11:33,454 - UIClient - INFO -   Calendar Assistant: http://127.0.0.1:8080
2025-06-10 20:11:33,454 - UIClient - INFO - 
2025-06-10 20:11:33,454 - UIClient - INFO - Environment Variables:
2025-06-10 20:11:33,454 - UIClient - INFO -   GOOGLE_API_KEY: âœ“ Set
2025-06-10 20:11:33,454 - UIClient - INFO - 
2025-06-10 20:11:33,454 - UIClient - INFO - Dashboard will be available at: http://0.0.0.0:8000
2025-06-10 20:11:33,454 - UIClient - INFO - ============================================================
INFO:     Started server process [31825]
INFO:     Waiting for application startup.
2025-06-10 20:11:33,469 - UIClient - INFO - UI Client starting up...
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     ('127.0.0.1', 50936) - "WebSocket /ws" [accepted]
2025-06-10 20:11:34,791 - UIClient - INFO - WebSocket connected. Total connections: 1
INFO:     connection open
INFO:__main__:ADK dependencies found, starting full A2A server...
INFO:lead_manager.adk_main:Configuring Lead Manager A2A server...
INFO:lead_manager.agent_executor:LeadManagerAgentExecutor initialized with ADK Runner.
INFO:lead_manager.adk_main:Starting Lead Manager A2A server on http://localhost:8082/
INFO:     Started server process [31822]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:8082 (Press CTRL+C to quit)
INFO:__main__:Configuring LEAD FINDER A2A server...
INFO:lead_finder.agent_executor:LeadFinderAgentExecutor initialized with ADK Runner.
INFO:__main__:Starting LEAD FINDER A2A server on 127.0.0.1:8081
INFO:__main__:Starting RiskGuard A2A server on http://127.0.0.1:8081/
INFO:     Started server process [31821]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8081 (Press CTRL+C to quit)
INFO:     127.0.0.1:50942 - "GET / HTTP/1.1" 200 OK
2025-06-10 20:11:38,804 - UIClient - INFO - WebSocket disconnected. Total connections: 0
INFO:     connection closed
INFO:     127.0.0.1:50942 - "GET /flutter_service_worker.js?v=2057184831 HTTP/1.1" 404 Not Found
2025-06-10 20:11:43,698 - UIClient - INFO - Starting lead finding process for city: Mary
INFO:     127.0.0.1:50957 - "POST /start_lead_finding HTTP/1.1" 303 See Other
2025-06-10 20:11:43,698 - BusinessLogic - INFO - Starting lead finding process for Mary
2025-06-10 20:11:43,698 - BusinessLogic - INFO - Calling Lead Finder at http://127.0.0.1:8081 for city: Mary
INFO:     127.0.0.1:50957 - "GET / HTTP/1.1" 200 OK
INFO:lead_finder.agent_executor:DEBUG: Context message parts: ["root=DataPart(data={'city': 'Mary'}, kind='data', metadata=None)"]
INFO:     ('127.0.0.1', 50962) - "WebSocket /ws" [accepted]
2025-06-10 20:11:43,804 - UIClient - INFO - WebSocket connected. Total connections: 1
INFO:lead_finder.agent_executor:Task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502: Using ADK session_id: 'ffbc321e-4d89-4c74-baab-2d1981313502' for city: 'Mary'
INFO:lead_finder.agent_executor:Task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502: Creating new ADK session for city: Mary
INFO:     connection open
INFO:lead_finder.agent_executor:Task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502: Successfully created ADK session with city: Mary
INFO:lead_finder.agent_executor:Task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502: Calling ADK run_async for city: Mary
WARNING:google_genai._api_client:Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
INFO:google_adk.google.adk.models.google_llm:Sending out request, model: gemini-2.0-flash-lite, backend: ml_dev, stream: False
INFO:google_adk.google.adk.models.google_llm:
LLM Request:
-----------------------------------------------------------
System Instruction:

You are PotentialLeadFinderAgent, a parallel agent designed to find potential business leads that have no website.
You will execute two search methods in parallel:

You are a fan-out agent.  
`city = context.session.state['city']`.

Immediately:
1. call `transfer_to_agent("GoogleMapsAgent")`
2. call `transfer_to_agent("ClusterSearchAgent")`

You will be given a city name in the user's query. Your one and only task is to immediately call the GoogleMapsAgent and ClusterSearchAgent tools in parallel using the provided city name. Do not ask for confirmation. Do not ask for the city again. Execute the tool calls directly.
Once both agents complete their search, return the combined results.


You are an agent. Your internal name is "PotentialLeadFinderAgent".

 The description about you is "Parallel agent for finding potential business leads"


You have a list of other agents to transfer to:


Agent name: GoogleMapsAgent
Agent description: Agent specialized in finding business information using Google Maps


Agent name: ClusterSearchAgent
Agent description: Agent specialized in finding business information using custom cluster search


If you are the best to answer the question according to your description, you
can answer it.

If another agent is better for answering the question according to its
description, call `transfer_to_agent` function to transfer the
question to that agent. When transferring, do not generate any text other than
the function call.

Your parent agent is LeadFinderAgent. If neither the other agents nor
you are best for answering the question according to the descriptions, transfer
to your parent agent. If you don't have parent agent, try answer by yourself.

-----------------------------------------------------------
Contents:
{"parts":[{"text":"Handle the requests as specified in the System Instruction."}],"role":"user"}
-----------------------------------------------------------
Functions:
transfer_to_agent: {'agent_name': {'type': <Type.STRING: 'STRING'>}} -> None
-----------------------------------------------------------

INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:a2a.server.tasks.task_manager:Task not found or task_id not set. Creating new task for event (task_id: lead-search-ffbc321e-4d89-4c74-baab-2d1981313502, context_id: ffbc321e-4d89-4c74-baab-2d1981313502).
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent "HTTP/1.1 200 OK"
WARNING:google_genai.types:Warning: there are non-text parts in the response: ['function_call', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
INFO:google_adk.google.adk.models.google_llm:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: transfer_to_agent, args: {'agent_name': 'GoogleMapsAgent'}
name: transfer_to_agent, args: {'agent_name': 'ClusterSearchAgent'}
-----------------------------------------------------------
Raw response:
{"candidates":[{"content":{"parts":[{"function_call":{"args":{"agent_name":"GoogleMapsAgent"},"name":"transfer_to_agent"}},{"function_call":{"args":{"agent_name":"ClusterSearchAgent"},"name":"transfer_to_agent"}}],"role":"model"},"finish_reason":"STOP","avg_logprobs":-0.00022957988337359646}],"model_version":"gemini-2.0-flash-lite","usage_metadata":{"candidates_token_count":22,"candidates_tokens_details":[{"modality":"TEXT","token_count":22}],"prompt_token_count":395,"prompt_tokens_details":[{"modality":"TEXT","token_count":395}],"total_token_count":417},"automatic_function_calling_history":[]}
-----------------------------------------------------------

WARNING:google_genai._api_client:Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
INFO:google_adk.google.adk.models.google_llm:Sending out request, model: gemini-2.0-flash-lite, backend: ml_dev, stream: False
INFO:google_adk.google.adk.models.google_llm:
LLM Request:
-----------------------------------------------------------
System Instruction:

You are ClusterSearchAgent, an agent specialized in finding business information using custom cluster search.

When you receive a city name:
1. Use the cluster_search tool to find businesses in that city
2. Format the results as a list of business entities with the following fields:
   - name: Business name
   - address: Full address
   - phone: Contact phone number (if available)
   - website: Business website (if available)
   - category: Business category/type
   - established: Year established (if available)

Return the results as a structured JSON array.


You are an agent. Your internal name is "ClusterSearchAgent".

 The description about you is "Agent specialized in finding business information using custom cluster search"


You have a list of other agents to transfer to:


Agent name: PotentialLeadFinderAgent
Agent description: Parallel agent for finding potential business leads


Agent name: GoogleMapsAgent
Agent description: Agent specialized in finding business information using Google Maps


If you are the best to answer the question according to your description, you
can answer it.

If another agent is better for answering the question according to its
description, call `transfer_to_agent` function to transfer the
question to that agent. When transferring, do not generate any text other than
the function call.

Your parent agent is PotentialLeadFinderAgent. If neither the other agents nor
you are best for answering the question according to the descriptions, transfer
to your parent agent. If you don't have parent agent, try answer by yourself.

-----------------------------------------------------------
Contents:
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'GoogleMapsAgent'}"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'ClusterSearchAgent'}"}],"role":"user"}
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"}],"role":"user"}
-----------------------------------------------------------
Functions:
transfer_to_agent: {'agent_name': {'type': <Type.STRING: 'STRING'>}} -> None
cluster_search: {'city': {'type': <Type.STRING: 'STRING'>}} -> None
-----------------------------------------------------------

INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent "HTTP/1.1 200 OK"
INFO:google_adk.google.adk.models.google_llm:
LLM Response:
-----------------------------------------------------------
Text:
Okay, I will use the cluster_search tool to find businesses in the specified city. Which city are you interested in?

-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"candidates":[{"content":{"parts":[{"text":"Okay, I will use the cluster_search tool to find businesses in the specified city. Which city are you interested in?\n"}],"role":"model"},"finish_reason":"STOP","avg_logprobs":-0.20604606775137094}],"model_version":"gemini-2.0-flash-lite","usage_metadata":{"candidates_token_count":26,"candidates_tokens_details":[{"modality":"TEXT","token_count":26}],"prompt_token_count":511,"prompt_tokens_details":[{"modality":"TEXT","token_count":511}],"total_token_count":537},"automatic_function_calling_history":[]}
-----------------------------------------------------------

WARNING:google_genai._api_client:Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
INFO:google_adk.google.adk.models.google_llm:Sending out request, model: gemini-2.0-flash-lite, backend: ml_dev, stream: False
INFO:google_adk.google.adk.models.google_llm:
LLM Request:
-----------------------------------------------------------
System Instruction:

You are MergerAgent, an agent specialized in processing and merging business data.

Your task is to:
1. Take the combined results from PotentialLeadFinderAgent
2. Process and deduplicate the data
3. Use the bigquery_upload tool to upload the final data to a BigQuery table

Return a summary of the process, including the number of businesses found and uploaded.


You are an agent. Your internal name is "MergerAgent".

 The description about you is "Agent for processing and merging business data"
-----------------------------------------------------------
Contents:
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'GoogleMapsAgent'}"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'ClusterSearchAgent'}"}],"role":"user"}
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"}],"role":"user"}
{"parts":[{"text":"For context:"},{"text":"[ClusterSearchAgent] said: Okay, I will use the cluster_search tool to find businesses in the specified city. Which city are you interested in?\n"}],"role":"user"}
-----------------------------------------------------------
Functions:
bigquery_upload: {'data': {'items': {'type': <Type.OBJECT: 'OBJECT'>}, 'type': <Type.ARRAY: 'ARRAY'>}} -> None
-----------------------------------------------------------

INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:     127.0.0.1:50957 - "GET /flutter_service_worker.js?v=2057184831 HTTP/1.1" 404 Not Found
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent "HTTP/1.1 200 OK"
WARNING:google_genai.types:Warning: there are non-text parts in the response: ['function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
INFO:google_adk.google.adk.models.google_llm:
LLM Response:
-----------------------------------------------------------
Text:
Okay, I will process the data from the PotentialLeadFinderAgent and upload it to BigQuery. Since there is no data from the PotentialLeadFinderAgent, I will upload an empty list.

-----------------------------------------------------------
Function calls:
name: bigquery_upload, args: {'data': []}
-----------------------------------------------------------
Raw response:
{"candidates":[{"content":{"parts":[{"text":"Okay, I will process the data from the PotentialLeadFinderAgent and upload it to BigQuery. Since there is no data from the PotentialLeadFinderAgent, I will upload an empty list.\n"},{"function_call":{"args":{"data":[]},"name":"bigquery_upload"}}],"role":"model"},"finish_reason":"STOP","avg_logprobs":-0.4024128807915582}],"model_version":"gemini-2.0-flash-lite","usage_metadata":{"candidates_token_count":45,"candidates_tokens_details":[{"modality":"TEXT","token_count":45}],"prompt_token_count":301,"prompt_tokens_details":[{"modality":"TEXT","token_count":301}],"total_token_count":346},"automatic_function_calling_history":[]}
-----------------------------------------------------------

WARNING:google_genai._api_client:Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
INFO:google_adk.google.adk.models.google_llm:Sending out request, model: gemini-2.0-flash-lite, backend: ml_dev, stream: False
INFO:google_adk.google.adk.models.google_llm:
LLM Request:
-----------------------------------------------------------
System Instruction:

You are MergerAgent, an agent specialized in processing and merging business data.

Your task is to:
1. Take the combined results from PotentialLeadFinderAgent
2. Process and deduplicate the data
3. Use the bigquery_upload tool to upload the final data to a BigQuery table

Return a summary of the process, including the number of businesses found and uploaded.


You are an agent. Your internal name is "MergerAgent".

 The description about you is "Agent for processing and merging business data"
-----------------------------------------------------------
Contents:
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'GoogleMapsAgent'}"},{"text":"[PotentialLeadFinderAgent] called tool `transfer_to_agent` with parameters: {'agent_name': 'ClusterSearchAgent'}"}],"role":"user"}
{"parts":[{"text":"For context:"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"},{"text":"[PotentialLeadFinderAgent] `transfer_to_agent` tool returned result: {}"}],"role":"user"}
{"parts":[{"text":"For context:"},{"text":"[ClusterSearchAgent] said: Okay, I will use the cluster_search tool to find businesses in the specified city. Which city are you interested in?\n"}],"role":"user"}
{"parts":[{"text":"Okay, I will process the data from the PotentialLeadFinderAgent and upload it to BigQuery. Since there is no data from the PotentialLeadFinderAgent, I will upload an empty list.\n"},{"function_call":{"args":{"data":[]},"name":"bigquery_upload"}}],"role":"model"}
{"parts":[{"function_response":{"name":"bigquery_upload","response":{"status":"success","message":"[MOCK] Successfully uploaded 0 business records to BigQuery","records_processed":0}}}],"role":"user"}
-----------------------------------------------------------
Functions:
bigquery_upload: {'data': {'items': {'type': <Type.OBJECT: 'OBJECT'>}, 'type': <Type.ARRAY: 'ARRAY'>}} -> None
-----------------------------------------------------------

INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent "HTTP/1.1 200 OK"
INFO:google_adk.google.adk.models.google_llm:
LLM Response:
-----------------------------------------------------------
Text:
I have uploaded 0 business records to BigQuery.

-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"candidates":[{"content":{"parts":[{"text":"I have uploaded 0 business records to BigQuery.\n"}],"role":"model"},"finish_reason":"STOP","avg_logprobs":-0.10603824257850647}],"model_version":"gemini-2.0-flash-lite","usage_metadata":{"candidates_token_count":12,"candidates_tokens_details":[{"modality":"TEXT","token_count":12}],"prompt_token_count":369,"prompt_tokens_details":[{"modality":"TEXT","token_count":369}],"total_token_count":381},"automatic_function_calling_history":[]}
-----------------------------------------------------------

INFO:lead_finder.lead_finder.callbacks:[Callback] Exiting agent: LeadFinderAgent. Processing final result.
DEBUG: Available attributes in callback_context are: ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_event_actions', '_invocation_context', '_state', 'agent_name', 'invocation_id', 'load_artifact', 'save_artifact', 'state', 'user_content']
ERROR:lead_finder.agent_executor:Task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502: Error running Lead Finder ADK agent for city Mary: 'CallbackContext' object has no attribute 'invocation_result'
Traceback (most recent call last):
  File "/Users/xskills/Development/Python/Hackathons/SalesShortcut/lead_finder/agent_executor.py", line 153, in execute
    async for event in self._adk_runner.run_async(
  File "/Users/xskills/Development/Python/Hackathons/SalesShortcut/venv/lib/python3.12/site-packages/google/adk/runners.py", line 196, in run_async
    async for event in invocation_context.agent.run_async(invocation_context):
  File "/Users/xskills/Development/Python/Hackathons/SalesShortcut/venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 153, in run_async
    if event := await self.__handle_after_agent_callback(ctx):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xskills/Development/Python/Hackathons/SalesShortcut/venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 335, in __handle_after_agent_callback
    after_agent_callback_content = callback(callback_context=callback_context)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xskills/Development/Python/Hackathons/SalesShortcut/lead_finder/lead_finder/callbacks.py", line 63, in post_results_callback
    invocation_result = callback_context.invocation_result
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CallbackContext' object has no attribute 'invocation_result'
INFO:     127.0.0.1:50960 - "POST / HTTP/1.1" 200 OK
2025-06-10 20:11:46,701 - httpx - INFO - HTTP Request: POST http://127.0.0.1:8081 "HTTP/1.1 200 OK"
2025-06-10 20:11:46,703 - BusinessLogic - INFO - Lead Finder task lead-search-ffbc321e-4d89-4c74-baab-2d1981313502 completed with state: TaskState.failed
2025-06-10 20:11:46,703 - BusinessLogic - WARNING - No artifacts found in Lead Finder response
2025-06-10 20:11:46,703 - BusinessLogic - ERROR - Lead finding failed: No artifacts in response
